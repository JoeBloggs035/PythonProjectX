Псевдоклассы CSS в Рlaywright
Псевдоклас в CSS — это ключевое слово, добавленное к селектору, которое определяет его особое состояние.
Рlaywright дополняет работу с CSS селекторами с помощью различных псевдоклассов.



Сопоставление элементов на основе макета
Например, input:right-of(:text("Password"))соответствует полю ввода,
которое находится справа от текста «Password» — полезно, когда на странице есть несколько вводов,
 которые трудно отличить друг от друга.

Рассмотрим работы с локаторами на примере сайта https://zimaev.github.io/table-1/

:right-of(div > button)
Соответствует элементам, которые находятся справа от любого элемента, соответствующего внутреннему
селектору, в любом положении по вертикали.

page.locator("td:right-of(td p:text('Software engineer'))")


:left-of(div > button)
Соответствует элементам, которые находятся слева от любого элемента, соответствующего внутреннему
селектору, в любой позиции по вертикали.

page.locator("td:left-of(td p:text('Software engineer'))")

:above(div > button)
Соответствует элементам, которые находятся над любым из элементов, соответствующих внутреннему
селектору, в любом горизонтальном положении.

page.locator("td:above(td p:text('Consultant'))")

:below(div > button)
Соответствует элементам, которые находятся ниже любого из элементов, соответствующих внутреннему
селектору, в любой позиции по горизонтали.

page.locator("td:below(td p:text('Consultant'))")

:near(div > button)
Подбирает элементы, которые находятся рядом (в пределах 50 CSS пикселей) с любым из элементов,
соответствующих внутреннему селектору.

page.locator("td:near(td p:text('Consultant'))")

Все псевдоклассы макета поддерживают необязательную опцию - максимальное расстояние в пикселях.
Например, button:near(:text("Username"), 120) соответствует кнопке, которая находится на
расстоянии не более 120 пикселей от элемента с текстом "Username".

page.locator("td:below(td p:text('Software engineer'), 100)")

Элементы, отвечающие одному из условий
page.locator('button:has-text("Log in"), button:has-text("Sign in")').click()

Пример выше нажимает на элемент с тегом <button>, которая содержит текст "Log in" или "Sign in".

Локатор N-го элемента
Вы можете сузить запрос до n-го совпадения, используя локатор nth=

# Первый элемент
page.locator("button").locator("nth=0").click()

# Последний элемент
page.locator("button").locator("nth=-1").click()

Определение местоположения только видимых элементов
:visible - псевдокласс в CSS-селекторах для выбора видимого элемента

page.locator("button:visible").click()

Определение по тексту
:has-text() - псевдокласс  выбора элемента содержащего указанный текст

page.locator('div:has-text("Card")').click()


Обратите внимание, что псевдокласс :has-text() нужно обязательно использовать вместе с
css селектором, иначе Playwright будет искать указанный текст по всему DOM. И с большой
долей вероятности, будет найден не тот элемент, который вы ожидаете.